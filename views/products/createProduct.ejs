<%- include ../layouts/cabeza.ejs %> 
<link rel="stylesheet" href="/stylesheets/form.css">
<link rel="stylesheet" href="/stylesheets/components.css">
<link rel="stylesheet" href="/stylesheets/products/productForm.css">
<%- include ../layouts/cabecera.ejs %> 

<%- include ../layouts/menu-lateral.ejs%> 

<main class="page-content" id="page-content">

  <div class="page-content-container">

    <header>
      <h1>Crear nuevo Producto</h1> 
    </header>

    <form method="post" action="/products/insertProduct" id="formulario" enctype="multipart/form-data">
      <section class="card col-md-8 col-lg-6">
        <article class="card-container">
          <header class="card-header">
            <h2 class="card-header-text">Datos del producto</h2>
          </header>
          <div class="form-container">
            <div class="field" id="group-producto">
              <label class="field-label" for="producto">Nombre del producto:</label>
              <input class="field-input" type="text" name="producto" required>
              <span class="icon" id="icon">
              </span>
              <p class="input-message">El nombre tiene que ser de 4 a 40 dígitos</p>
            </div>
            <div class="field">
              <label class="field-label" for="precio">Precio:</label>
              <input class="field-input" type="number" name="precio" step="0.01" min="0" pattern="^[0-9]+" required>
            </div>
            <div class="field">
              <label class="field-label" for="descripcion">Descripción:</label>
              <textarea class="field-input" name="descripcion" id="" rows="5"></textarea>
            </div>
          </div>
        </article>
      </section>
  
      <section class="card col-md-8 col-lg-6">
        <article class="card-container">
          <header class="card-header">
            <h2 class="card-header-text">Materiales del producto</h2>
          </header>
          <div class="input-area">
            <div class="field col-7">
              <label class="field-label" for="material">Material:</label>
              <select class="field-input" name="material" id="material">
                <% for( let material = 0; material < materials.length; material++ ) { %>
                  <option value="<%=materials[material].codigo%>"><%=materials[material].nombre%></option>
                <% } %>
              </select>
            </div>
            <div class="field col-5">
              <label class="field-label" for="cantidad">Cantidad:</label>
              <input class="field-input" type="number" name="cantidad"  id="cantidad" min="1" pattern="^[0-9]+">
            </div>
          </div>
          <button id="addMaterial" type="button" class="button-new">
            <span class="button-new-icon">
              <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" fill="currentColor">
                <path d="M11.075 18.8v-5.875H5.2V11.05h5.875V5.175h1.875v5.875h5.875v1.875H12.95V18.8Z"></path>
              </svg>
              <span class="button-new-text">Agregar material</span>
           </span>
          </button>
          <div class="result-area result-area-table">
            <table id="table"  class="table col-12">
              <thead class="thead">
                <tr>
                  <th>Material</th>
                  <th>Cantidad</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="tbody" class="tbody">

              </tbody>
            </table>
        </article>
      </section>
  
  
      <section class="card col-md-8 col-lg-6">
        <article class="card-container">
          <header class="card-header">
            <h2 class="card-header-text">Fotografía del producto</h2>
          </header>
          <div class="card-photo-container">
            <span id="photo-container" class="card-icon-container">
              <input name="file" type="file" id="file" accept="image/jpeg,image/png">
              <svg id="svgCamera" xmlns="http://www.w3.org/2000/svg" height="48" width="48" fill="currentColor"><path d="M4.7 44q-1.2 0-2.1-.9-.9-.9-.9-2.1V15.35q0-1.15.9-2.075.9-.925 2.1-.925h7.35L15.7 8h14v6h5.95v6h6.05v21q0 1.2-.925 2.1-.925.9-2.075.9Zm17-7.3q3.6 0 6.05-2.45 2.45-2.45 2.45-6.05 0-3.65-2.45-6.075Q25.3 19.7 21.7 19.7q-3.65 0-6.075 2.425Q13.2 24.55 13.2 28.2q0 3.6 2.425 6.05Q18.05 36.7 21.7 36.7Zm0-3q-2.4 0-3.95-1.575Q16.2 30.55 16.2 28.2q0-2.4 1.55-3.95 1.55-1.55 3.95-1.55 2.35 0 3.925 1.55Q27.2 25.8 27.2 28.2q0 2.35-1.575 3.925Q24.05 33.7 21.7 33.7Zm16.95-18.4V11h-4.3V8h4.3V3.65h3V8H46v3h-4.35v4.3Z"/></svg>
            </span>
          </div>
          <div class="buttons-container">
            <button type="button" id="buttonFile" class="button">
              <span class="button-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" fill="currentColor"><path d="m19.3 8.925-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Z"/></svg>
              </span>
              <span class="button-text">Cambiar</span>
            </button>
          </div>
        </article>
      </section>

  
      <div class="buttons-container margin-botton">
        <a href="/products" class="button-form">Cancelar</a>
        <button class="button-form button-primary" type="submit">Guardar</button>
      </div>

    </form>

  </div>

</main>

<script src="/javascripts/productsValidation.js"></script>
<script src="/javascripts/uploadFile.js"></script>
<script src="/javascripts/addMaterials.js"></script>
<%- include ../layouts/pie.ejs%> 
